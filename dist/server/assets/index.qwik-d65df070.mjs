import{componentQrl as E,inlinedQrl as h,useContext as y,jsx as j,_IMMUTABLE as mt,SkipRender as pt,useServerData as vt,useStore as f,_weakSerialize as _t,useSignal as b,useLexicalScope as D,useContextProvider as u,useTaskQrl as gt,Slot as O,useOnDocument as wt,implicit$FirstArg as U,createContext as _,noSerialize as tt,useEnvData as yt,_deserializeData as kt,getLocale as Lt,withLocale as K,_wrapSignal as bt}from"@builder.io/qwik";import{jsx as S}from"@builder.io/qwik/jsx-runtime";import{z as Z}from"zod";const Ct=!0,qt='((s,a,i,r)=>{i=(e,t)=>{t=document.querySelector("[q\\\\:base]"),t&&a.active&&a.active.postMessage({type:"qprefetch",base:t.getAttribute("q:base"),...e})},document.addEventListener("qprefetch",e=>{const t=e.detail;a?i(t):t.bundles&&s.push(...t.bundles)}),navigator.serviceWorker.register("/service-worker.js").then(e=>{r=()=>{a=e,i({bundles:s})},e.installing?e.installing.addEventListener("statechange",t=>{t.target.state=="activated"&&r()}):e.active&&r()}).catch(e=>console.error(e))})([])',F=_("qc-s"),et=_("qc-c"),H=_("qc-ic"),Y=_("qc-h"),$=_("qc-l"),z=_("qc-n"),nt=_("qc-a"),Kt=E(h(()=>{const{value:t}=y(H);if(t&&t.length>0){const e=t.length;let n=null;for(let o=e-1;o>=0;o--)n=j(t[o].default,{children:n,[mt]:{children:!1}});return n}return pt},"RouterOutlet_component_AKetNByE5TM")),R=Symbol(),Dt=Symbol(),q=new Map,ot="qaction",St=(t,e,n,o)=>{const a=W(),i={head:a,withLocale:r=>K(o,r),getData:r=>{const s=r.__qrl.getHash();if(r.__brand==="server_loader"&&!(s in t.loaders))throw new Error("You can not get the returned data of a loader that has not been executed for this request.");const c=t.loaders[s];if(c instanceof Promise)throw new Error("Loaders returning a function can not be refered to in the head function.");return c},...e};for(let r=n.length-1;r>=0;r--){const s=n[r]&&n[r].head;s&&(typeof s=="function"?G(a,K(o,()=>s(i))):typeof s=="object"&&G(a,s))}return i.head},G=(t,e)=>{typeof e.title=="string"&&(t.title=e.title),Q(t.meta,e.meta),Q(t.links,e.links),Q(t.styles,e.styles),Object.assign(t.frontmatter,e.frontmatter)},Q=(t,e)=>{if(Array.isArray(e))for(const n of e){if(typeof n.key=="string"){const o=t.findIndex(a=>a.key===n.key);if(o>-1){t[o]=n;continue}}t.push(n)}},W=()=>({title:"",meta:[],links:[],styles:[],frontmatter:{}}),Zt=()=>y(Y),at=()=>y($),Pt=()=>y(z),Et=()=>y(nt),It=()=>tt(yt("qwikcity")),rt=t=>t.pathname+t.search+t.hash,P=(t,e)=>new URL(t,e.href),At=(t,e)=>t.origin===e.origin,xt=(t,e)=>t.pathname===e.pathname,Tt=(t,e,n)=>{let o=e??"";return n&&(o+=(o?"&":"?")+ot+"="+encodeURIComponent(n.id)),t+(t.endsWith("/")?"":"/")+"q-data.json"+o},Rt=(t,e)=>{const n=t.href;if(typeof n=="string"&&n.trim()!==""&&typeof t.target!="string")try{const o=P(n,e),a=P("",e);if(At(o,a))return rt(o)}catch(o){console.error(o)}return null},Qt=(t,e,n)=>{if(t.prefetch===!0&&e){const o=P(e,n);if(!xt(o,P("",n)))return""}return null},Mt=t=>{typeof document<"u"&&document.dispatchEvent(new CustomEvent("qprefetch",{detail:t}))},Nt=async(t,e,n)=>{const o=new URL(t),a=o.pathname,l=o.search,i=Tt(a,l,n);let r;if(n||(r=q.get(i)),Mt({links:[a]}),!r){const s=jt(n);n&&(n.data=void 0),r=fetch(i,s).then(c=>{const g=new URL(c.url);if(g.origin!==location.origin||!Ot(g.pathname)){location.href=g.href;return}if((c.headers.get("content-type")||"").includes("json"))return c.text().then(k=>{const m=kt(k);if(!m){location.href=t;return}if(e&&q.delete(i),m.redirect)location.href=m.redirect;else if(n){const p=m.loaders[n.id];n.resolve({status:c.status,result:p})}return m});location.href=t}),n||q.set(i,r)}return r.then(s=>(s||q.delete(i),s))},jt=t=>{const e=t==null?void 0:t.data;if(e)return e instanceof FormData?{method:"POST",body:e}:{method:"POST",body:JSON.stringify(e),headers:{"Content-Type":"application/json, charset=UTF-8"}}},Ot=t=>t.endsWith(Ut),Ut="/q-data.json",Gt=E(h(()=>{const t=It();if(!(t!=null&&t.params))throw new Error("Missing Qwik City Env Data");const e=vt("url");if(!e)throw new Error("Missing Qwik URL Env Data");const n=new URL(e),o=f({href:n.href,pathname:n.pathname,query:n.searchParams,params:t.params,isNavigating:!1}),a=_t(f(t.response.loaders)),l=b(rt(n)),i=f(W),r=f({headings:void 0,menu:void 0}),s=b(),c=t.response.action,g=c?t.response.loaders[c]:void 0,k=b(g?{id:c,data:t.response.formData,output:{result:g,status:t.response.status}}:void 0),m=h(async p=>{const[I,v,A]=D(),d=v.value;if(p){if(d===p)return;v.value=p}else v.value="",v.value=d;I.value=void 0,A.isNavigating=!0},"QwikCityProvider_component_goto_fX0bDjeJa0E",[k,l,o]);return u(et,r),u(H,s),u(Y,i),u($,o),u(z,m),u(F,a),u(nt,k),gt(h(({track:p})=>{const[I,v,A,d,B,Wt,J,w]=D();async function st(){const[ct,Bt]=p(()=>[J.value,I.value]),lt=Lt("");let x=new URL(ct,w.href),V,T=null;if(T=B.loadedRoute,V=B.response,T){const[ut,ht,dt]=T,X=x.pathname,C=ht,ft=C[C.length-1];w.href=x.href,w.pathname=X,w.params={...ut},w.query=x.searchParams,J.untrackedValue=X;const L=St(V,w,C,lt);v.headings=ft.headings,v.menu=dt,A.value=tt(C),d.links=L.links,d.meta=L.meta,d.styles=L.styles,d.title=L.title,d.frontmatter=L.frontmatter}}const it=st();if(Ct)return it},"QwikCityProvider_component_useTask_02wMImzEAbk",[k,r,s,i,t,a,l,o])),S(O,{},"qY_0")},"QwikCityProvider_component_TxCFOy819ag"));h(t=>{const e=t.url??"http://localhost/",n=new URL(e),o=f({href:n.href,pathname:n.pathname,query:n.searchParams,params:t.params??{},isNavigating:!1}),a=b({}),l=h(async c=>{throw new Error("Not implemented")},"QwikCityMockProvider_component_goto_BUbtvTyvVRE"),i=f(W),r=f({headings:void 0,menu:void 0}),s=b();return u(et,r),u(H,s),u(Y,i),u($,o),u(z,l),u(F,a),S(O,{},"qY_1")},"QwikCityMockProvider_component_WmYC5H00wtI");const te=E(h(t=>{const e=Pt(),n=at(),o=t.href,a={...t},l=Rt(a,n),i=Qt(t,l,n);return a["preventdefault:click"]=!!l,a.href=l||o,wt("qinit",h(()=>{window[R]||(window[R]=()=>{window[Dt]||location.reload()},setTimeout(()=>{addEventListener("popstate",window[R])},0))},"Link_component_useOnDocument_u0YVoxt2aTY")),S("a",{...a,onClick$:h(()=>{const[r,s,c]=D();r&&c(s.href)},"Link_component_a_onClick_kzjavhDI3L0",[l,a,e]),"data-prefetch":i,onMouseOver$:h((r,s)=>M(s),"Link_component_a_onMouseOver_yiXwCC0m3jY"),onFocus$:h((r,s)=>M(s),"Link_component_a_onFocus_PrXIxv2vNXY"),onQVisible$:h((r,s)=>M(s,!0),"Link_component_a_onQVisible_EpaZ5qQ4Lg4"),children:S(O,{},"AD_0")},"AD_1")},"Link_component_8gdLBszqbaM")),M=(t,e)=>{t&&t.href&&t.hasAttribute("data-prefetch")&&(N||(N=innerWidth),(!e||e&&N<520)&&Nt(t.href))};let N=0;const ee=()=>j("script",{dangerouslySetInnerHTML:qt});class Ft{constructor(e,n){this.__qrl=e,this.__schema=n,this.__brand="server_action"}use(){const e=at(),n=this.__qrl.getHash(),o=Et(),a={actionPath:`?${ot}=${n}`,isRunning:!1,status:void 0,value:void 0,formData:void 0},l=f(()=>{const i=o.value;if(i&&(i==null?void 0:i.id)===n){const r=i.data;if(r instanceof FormData&&(a.formData=r),i.output){const{status:s,result:c}=i.output;a.status=s,a.value=c}}return a});return a.run=h((i={})=>{throw D(),new Error(`Actions can not be invoked within the server during SSR.
Action.run() can only be called on the browser, for example when a user clicks a button, or submits a form.`)},"ActionImpl_MLsGa2EjBII",[o,n,e,l]),l}}const Ht=(t,e)=>{const n=new Ft(t,e);return typeof globalThis._qwikActionsMap>"u"&&(globalThis._qwikActionsMap=new Map),globalThis._qwikActionsMap.set(t.getHash(),n),n};U(Ht);class Yt{constructor(e){this.__qrl=e,this.__brand="server_loader"}use(){return y(F,e=>{const n=this.__qrl.getHash();if(!(n in e))throw new Error(`Loader was used in a path where the 'loader$' was not declared.
This is likely because the used loader was not exported in a layout.tsx or index.tsx file of the existing route.
For more information check: https://qwik.builder.io/qwikcity/loader`);return bt(e,n)})}}const $t=t=>new Yt(t);U($t);const zt=async t=>{{let e=await t.resolve();return typeof e=="function"&&(e=e(Z)),Z.object(e)}};U(zt);const ne=({action:t,spaReset:e,reloadDocument:n,onSubmit$:o,...a})=>j("form",{...a,action:t.actionPath,"preventdefault:submit":!n,onSubmit$:[n?void 0:t.run,o],method:"post",["data-spa-reset"]:e?"true":void 0});export{ne as F,te as L,Gt as Q,Kt as R,ee as S,Ht as a,Zt as b,$t as l,at as u,zt as z};
