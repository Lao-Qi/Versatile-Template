var ge=Object.defineProperty;var ye=(e,t,a)=>t in e?ge(e,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[t]=a;var A=(e,t,a)=>(ye(e,typeof t!="symbol"?t+"":t,a),a);import"reflect-metadata";import{fileURLToPath as ee}from"url";import{_serializeData as be}from"@builder.io/qwik";import{getNotFound as we}from"./@qwik-city-not-found-paths.js";import ve from"./@qwik-city-plan.mjs";import{isStaticPath as Re}from"./@qwik-city-static-paths.js";import{createReadStream as xe}from"fs";import{join as P,extname as _e}from"path";import{TextEncoderStream as Se,TextDecoderStream as Te,WritableStream as Ae,ReadableStream as Pe}from"stream/web";import{fetch as De,Headers as Me,Request as He,Response as $e,FormData as Oe}from"undici";import We from"crypto";import Ee from"./entry.ssr.mjs";import S,{Router as te}from"express";import ke from"compression";import{join as T}from"path/win32";import{readFile as j}from"fs/promises";import"./assets/index.qwik-d65df070.mjs";import"@builder.io/qwik/jsx-runtime";import"zod";import"@builder.io/qwik/server";var ae=class extends Error{constructor(e,t){super(t),this.status=e}};function je(e,t){let a="Server Error";return t!=null&&(typeof t.message=="string"?a=t.message:a=String(t)),qe(e,a)}function qe(e,t){typeof e!="number"&&(e=500),typeof t=="string"?t=Ce(t):t="";const a=typeof t=="string"?"600px":"300px",r=e>=500?Ne:Ie;return`<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <meta http-equiv="Status" content="${e}">
  <title>${e} ${t}</title>
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <style>
    body { color: ${r}; background-color: #fafafa; padding: 30px; font-family: ui-sans-serif, system-ui, -apple-system, BlinkMacSystemFont, Roboto, sans-serif; }
    p { max-width: ${a}; margin: 60px auto 30px auto; background: white; border-radius: 4px; box-shadow: 0px 0px 50px -20px ${r}; overflow: hidden; }
    strong { display: inline-block; padding: 15px; background: ${r}; color: white; }
    span { display: inline-block; padding: 15px; }
  </style>
</head>
<body><p><strong>${e}</strong> <span>${t}</span></p></body>
</html>`}var Le=/[&<>]/g,Ce=e=>e.replace(Le,t=>{switch(t){case"&":return"&amp;";case"<":return"&lt;";case">":return"&gt;";default:return""}}),Ie="#006ce9",Ne="#713fc2",B={lax:"Lax",none:"None",strict:"Strict"},Ue={seconds:1,minutes:1*60,hours:1*60*60,days:1*60*60*24,weeks:1*60*60*24*7},Fe=(e,t,a)=>{const r=[`${e}=${t}`];return typeof a.domain=="string"&&r.push(`Domain=${a.domain}`),typeof a.maxAge=="number"?r.push(`Max-Age=${a.maxAge}`):Array.isArray(a.maxAge)?r.push(`Max-Age=${a.maxAge[0]*Ue[a.maxAge[1]]}`):typeof a.expires=="number"||typeof a.expires=="string"?r.push(`Expires=${a.expires}`):a.expires instanceof Date&&r.push(`Expires=${a.expires.toUTCString()}`),a.httpOnly&&r.push("HttpOnly"),typeof a.path=="string"&&r.push(`Path=${a.path}`),a.sameSite&&B[a.sameSite]&&r.push(`SameSite=${B[a.sameSite]}`),a.secure&&r.push("Secure"),r.join("; ")},Qe=e=>{const t={};if(typeof e=="string"&&e!==""){const a=e.split(";");for(const r of a){const n=r.split("=");n.length>1&&(t[decodeURIComponent(n[0].trim())]=decodeURIComponent(n[1].trim()))}}return t},M=Symbol("request-cookies"),C=Symbol("response-cookies"),re,Be=class{constructor(e){this[re]={},this[M]=Qe(e)}get(e){const t=this[M][e];return t?{value:t,json(){return JSON.parse(t)},number(){return Number(t)}}:null}getAll(){return Object.keys(this[M]).reduce((e,t)=>(e[t]=this.get(t),e),{})}has(e){return!!this[M][e]}set(e,t,a={}){const r=typeof t=="string"?t:encodeURIComponent(JSON.stringify(t));this[C][e]=Fe(e,r,a)}delete(e,t){this.set(e,"deleted",{...t,maxAge:0})}headers(){return Object.values(this[C])}};re=C;var H=class{},$=class extends H{},G=new WeakMap,Ge="qaction";function Je(e){const{url:t,params:a,request:r,status:n,locale:o}=e,s={};r.headers.forEach((u,i)=>s[i]=u);const c=F(e),l=e.sharedMap.get("actionFormData");return{url:new URL(t.pathname+t.search,t).href,requestHeaders:s,locale:o(),qwikcity:{params:{...a},loadedRoute:it(e),response:{status:n(),loaders:O(e),action:c,formData:l}}}}var ze=(e,t,a,r)=>{const n=[],o=[],s=!!(t&&Xe(t[1]));return e&&J(n,o,e,s,a),t&&(s&&(o.push(Ve),o.push(tt)),J(n,o,t[1],s,a),s&&(n.length+z.length>0&&o.push(z(n)),o.push(r))),o.length>0&&o.unshift(Ze),o},J=(e,t,a,r,n)=>{for(const o of a){typeof o.onRequest=="function"?t.push(o.onRequest):Array.isArray(o.onRequest)&&t.push(...o.onRequest);let s;switch(n){case"GET":{s=o.onGet;break}case"POST":{s=o.onPost;break}case"PUT":{s=o.onPut;break}case"PATCH":{s=o.onPatch;break}case"DELETE":{s=o.onDelete;break}case"OPTIONS":{s=o.onOptions;break}case"HEAD":{s=o.onHead;break}}if(typeof s=="function"?t.push(s):Array.isArray(s)&&t.push(...s),r){const c=Object.values(o).filter(l=>Ye(l,"server_loader"));e.push(...c)}}},Ye=(e,t)=>e&&typeof e=="object"&&e.__brand===t;function z(e){return async t=>{if(t.headersSent){t.exit();return}const{method:a}=t,r=O(t);if(a==="POST"){const n=t.query.get(Ge),o=globalThis._qwikActionsMap;if(n&&o){const s=o.get(n);if(s){ct(t,n);const c=de(t.request.headers),l=t.request.clone();let u;if(c){const p=await l.formData();t.sharedMap.set("actionFormData",p),u=Ke(p)}else u=await l.json();let i=!1;if(s.__schema){const f=await(await s.__schema).safeParseAsync(u);f.success?u=f.data:(i=!0,globalThis.qDev&&console.error(`
VALIDATION ERROR
action$() zod validated failed`,`

  - Received:`,u,`
  - Issues:`,f.error.issues),r[n]={__brand:"fail",...f.error.flatten()})}if(!i){const p=await s.__qrl(u,t);r[n]=p}}}}e.length>0&&await Promise.all(e.map(n=>{const o=n.__qrl.getHash();return r[o]=Promise.resolve().then(()=>n.__qrl(t)).then(s=>r[o]=typeof s=="function"?s():s)}))}}var Ke=e=>{const t={};return e.forEach((a,r)=>{const n=r.split(".").filter(s=>s);let o=t;for(let s=0;s<n.length;s++){let c=n[s];s===n.length-1?c.endsWith("[]")?(c=c.slice(0,-2),o[c]=o[c]||[],o[c].push(a)):o[c]=a:o=o[c]={}}}),t};function Ve(e){const t=st(e),a=ot(e),{pathname:r,url:n}=e;if(!fe(r)&&r!==a&&!r.endsWith(".html")){if(t){if(!r.endsWith("/"))throw e.redirect(302,r+"/"+n.search)}else if(r.endsWith("/"))throw e.redirect(302,r.slice(0,r.length-1)+n.search)}}function Xe(e){const t=e[e.length-1];return t&&typeof t.default=="function"}function ne(e,t){return e.pathname.endsWith(x)?e.pathname.slice(0,-x.length+(t?1:0))+e.search:e.pathname}var se=new TextEncoder;function Ze({method:e,url:t,request:a,error:r}){if(e==="POST"&&a.headers.get("origin")!==t.origin&&de(a.headers))throw r(403,`Cross-site ${a.method} form submissions are forbidden`)}function et(e,t){return async a=>{if(a.headersSent||a.pathname.endsWith(x))return;a.request.headers.forEach((p,f)=>p);const n=a.headers;n.has("Content-Type")||n.set("Content-Type","text/html; charset=utf-8");const{readable:o,writable:s}=new TextEncoderStream,c=a.getWritableStream(),l=o.pipeTo(c),u=s.getWriter(),i=a.status();try{const p=lt(a)==="static",f=await e({stream:u,serverData:Je(a),containerAttributes:{["q:render"]:p?"static":""}}),m={loaders:O(a),action:F(a),status:i!==200?i:200,href:ne(a.url,!0)};(typeof f).html==="string"&&await u.write(f.html),a.sharedMap.set("qData",m)}finally{await u.ready,await u.close(),await l}}}async function tt(e){if(fe(e.pathname)){try{await e.next()}catch(l){if(!(l instanceof $))throw l}if(e.headersSent||e.exited)return;const a=e.status(),r=e.headers.get("Location");if(a>=301&&a<=308&&r){const l=at(r);if(l){e.headers.set("Location",l),e.getWritableStream().close();return}else e.status(200),e.headers.delete("Location")}e.request.headers.forEach((l,u)=>l),e.headers.set("Content-Type","application/json; charset=utf-8");const o={loaders:O(e),action:F(e),status:a!==200?a:200,href:ne(e.url,!0),redirect:r??void 0},s=e.getWritableStream().getWriter(),c=await be(o);s.write(se.encode(c)),e.sharedMap.set("qData",o),s.close()}}function at(e){if(e.startsWith("/")){const t=x,a=new URL(e,"http://localhost");return(a.pathname.endsWith("/")?a.pathname.slice(0,-1):a.pathname)+(t.startsWith("/")?"":"/")+t+a.search}else return}function rt(e){const t=[];return e==="day"?e=60*60*24:e==="week"?e=60*60*24*7:e==="month"?e=60*60*24*30:e==="year"?e=60*60*24*365:e==="private"?e={private:!0,noCache:!0}:e==="immutable"?e={public:!0,immutable:!0,maxAge:60*60*24*365,staleWhileRevalidate:60*60*24*365}:e==="no-cache"&&(e={noCache:!0}),typeof e=="number"&&(e={maxAge:e,sMaxAge:e,staleWhileRevalidate:e}),e.immutable&&t.push("immutable"),e.maxAge&&t.push(`max-age=${e.maxAge}`),e.sMaxAge&&t.push(`s-maxage=${e.sMaxAge}`),e.noStore&&t.push("no-store"),e.noCache&&t.push("no-cache"),e.private&&t.push("private"),e.public&&t.push("public"),e.staleWhileRevalidate&&t.push(`stale-while-revalidate=${e.staleWhileRevalidate}`),t.join(", ")}var oe=Symbol("RequestEvLoaders"),q=Symbol("RequestEvLocale"),ie=Symbol("RequestEvMode"),v=Symbol("RequestEvStatus"),ce=Symbol("RequestEvRoute"),U=Symbol("RequestEvAction"),le=Symbol("RequestEvTrailingSlash"),ue=Symbol("RequestEvBasePathname");function nt(e,t,a,r=!0,n="/",o){const{request:s,platform:c,env:l}=e,u=new Be(s.headers.get("cookie")),i=new Headers,p=new URL(s.url);let f=-1,m=null;const b=async()=>{for(f++;f<a.length;){const d=a[f],h=d(y);h instanceof Promise&&await h,f++}},g=()=>{if(m!==null)throw new Error("Response already sent")},w=(d,h)=>{if(g(),typeof d=="number"){y[v]=d;const _=y.getWritableStream().getWriter();_.write(typeof h=="string"?se.encode(h):h),_.close()}else{const D=d.status;if(y[v]=D,d.headers.forEach((_,he)=>{i.append(he,_)}),d.body){const _=y.getWritableStream();d.body.pipeTo(_)}else{if(D>=300&&D<400)return new $;y.getWritableStream().getWriter().close()}}return new H},k={},y={[oe]:k,[q]:e.locale,[ie]:e.mode,[v]:200,[U]:void 0,[le]:r,[ue]:n,[ce]:t,cookie:u,headers:i,env:l,method:s.method,params:(t==null?void 0:t[0])??{},pathname:p.pathname,platform:c,query:p.searchParams,request:s,url:p,sharedMap:new Map,get headersSent(){return m!==null},get exited(){return f>=Y},next:b,exit:()=>(f=Y,new H),cacheControl:d=>{g(),i.set("Cache-Control",rt(d))},getData:async d=>{const h=d.__qrl.getHash();if(d.__brand==="server_loader"&&!(h in k))throw new Error("You can not get the returned data of a loader that has not been executed for this request.");return k[h]},status:d=>typeof d=="number"?(g(),y[v]=d,d):y[v],locale:d=>(typeof d=="string"&&(y[q]=d),y[q]||""),error:(d,h)=>(y[v]=d,i.delete("Cache-Control"),new ae(d,h)),redirect:(d,h)=>(g(),y[v]=d,i.set("Location",h),i.delete("Cache-Control"),d>301&&i.set("Cache-Control","no-store"),new $),fail:(d,h)=>(g(),y[v]=d,i.delete("Cache-Control"),{failed:!0,...h}),text:(d,h)=>(i.set("Content-Type","text/plain; charset=utf-8"),w(d,h)),html:(d,h)=>(i.set("Content-Type","text/html; charset=utf-8"),w(d,h)),json:(d,h)=>(i.set("Content-Type","application/json; charset=utf-8"),w(d,JSON.stringify(h))),send:w,getWritableStream:()=>(m===null&&(m=e.getWritableStream(y[v],i,u,o,y)),m)};return y}function O(e){return e[oe]}function st(e){return e[le]}function ot(e){return e[ue]}function it(e){return e[ce]}function F(e){return e[U]}function ct(e,t){e[U]=t}function lt(e){return e[ie]}var Y=999999999;function ut(e,t,a,r=!0,n="/"){let o;const s=new Promise(l=>o=l),c=nt(e,t,a,r,n,o);return{response:s,requestEv:c,completion:ft(c,o)}}async function ft(e,t){try{await e.next()}catch(a){if(a instanceof $)e.getWritableStream().close();else if(a instanceof ae){if(console.error(a),!e.headersSent){const r=je(a.status,a);e.html(a.status,r)}}else if(!(a instanceof H))return a}finally{t(null)}}function dt(e,t){if(e.endsWith(x)){const a=e.length-pt+(t?1:0);e=e.slice(0,a),e===""&&(e="/")}return e}var fe=e=>e.endsWith(x),x="/q-data.json",pt=x.length;function de(e){return mt(e,"application/x-www-form-urlencoded","multipart/form-data")}function mt(e,...t){var a;const r=((a=e.get("content-type"))==null?void 0:a.split(";",1)[0].trim())??"";return t.includes(r)}var ht=async(e,t,a,r)=>{if(Array.isArray(e))for(const n of e){const o=n[0].exec(r);if(o){const s=n[1],c=yt(n[2],o),l=n[4],u=new Array(s.length),i=[],p=gt(t,r);let f;return s.forEach((m,b)=>{K(m,i,g=>u[b]=g,a)}),K(p,i,m=>f=m==null?void 0:m.default,a),i.length>0&&await Promise.all(i),[c,u,f,l]}}return null},K=(e,t,a,r)=>{if(typeof e=="function"){const n=G.get(e);if(n)a(n);else{const o=e();typeof o.then=="function"?t.push(o.then(s=>{r!==!1&&G.set(e,s),a(s)})):o&&a(o)}}},gt=(e,t)=>{if(e){t=t.endsWith("/")?t:t+"/";const a=e.find(r=>r[0]===t||t.startsWith(r[0]+(t.endsWith("/")?"":"/")));if(a)return a[1]}},yt=(e,t)=>{const a={};let r,n;if(e)for(r=0;r<e.length;r++)n=t?t[r+1]:"",a[e[r]]=n.endsWith("/")?n.slice(0,-1):n;return a};async function bt(e,t){const{render:a,qwikCityPlan:r}=t,{routes:n,serverPlugins:o,menus:s,cacheModules:c,trailingSlash:l,basePathname:u}=r,i=e.url.pathname,p=dt(i,l),f=await wt(o,n,s,c,p,e.request.method,a);return f?ut(e,f[0],f[1],l,u):null}async function wt(e,t,a,r,n,o,s){const c=await ht(t,a,r,n),l=ze(e,c,o,et(s));return l.length>0?[c,l]:null}var{ORIGIN:vt,PROTOCOL_HEADER:V,HOST_HEADER:Rt="host"}=process.env;function xt(e){const t=e.headers,a=V&&t[V]||(e.socket.encrypted||e.connection.encrypted?"https":"http"),r=t[Rt];return`${a}://${r}`}function L(e){const t=vt??xt(e);return new URL(e.url||"/",t)}async function _t(e,t,a,r){const n=new Headers,o=t.headers;for(const i in o){const p=o[i];if(typeof p=="string")n.set(i,p);else if(Array.isArray(p))for(const f of p)n.append(i,f)}const s=async function*(){for await(const i of t)yield i},c=t.method==="HEAD"||t.method==="GET"?void 0:s(),l={method:t.method,headers:n,body:c,duplex:"half"};return{mode:r,url:e,request:new Request(e.href,l),env:{get(i){return process.env[i]}},getWritableStream:(i,p,f)=>{a.statusCode=i,p.forEach((g,w)=>a.setHeader(w,g));const m=f.headers();return m.length>0&&a.setHeader("Set-Cookie",m),new WritableStream({write(g){a.write(g)},close(){a.end()}})},platform:{ssr:!0,node:process.versions.node},locale:void 0}}var St={"3gp":"video/3gpp","3gpp":"video/3gpp",asf:"video/x-ms-asf",asx:"video/x-ms-asf",avi:"video/x-msvideo",avif:"image/avif",bmp:"image/x-ms-bmp",css:"text/css",flv:"video/x-flv",gif:"image/gif",htm:"text/html",html:"text/html",ico:"image/x-icon",jng:"image/x-jng",jpeg:"image/jpeg",jpg:"image/jpeg",js:"application/javascript",json:"application/json",kar:"audio/midi",m4a:"audio/x-m4a",m4v:"video/x-m4v",mid:"audio/midi",midi:"audio/midi",mng:"video/x-mng",mov:"video/quicktime",mp3:"audio/mpeg",mp4:"video/mp4",mpeg:"video/mpeg",mpg:"video/mpeg",ogg:"audio/ogg",pdf:"application/pdf",png:"image/png",rar:"application/x-rar-compressed",shtml:"text/html",svg:"image/svg+xml",svgz:"image/svg+xml",tif:"image/tiff",tiff:"image/tiff",ts:"video/mp2t",txt:"text/plain",wbmp:"image/vnd.wap.wbmp",webm:"video/webm",webp:"image/webp",wmv:"video/x-ms-wmv",woff:"font/woff",woff2:"font/woff2",xml:"text/xml",zip:"application/zip"};function Tt(){typeof global<"u"&&typeof globalThis.fetch!="function"&&typeof process<"u"&&process.versions.node&&(globalThis.fetch=De,globalThis.Headers=Me,globalThis.Request=He,globalThis.Response=$e,globalThis.FormData=Oe),typeof globalThis.TextEncoderStream>"u"&&(globalThis.TextEncoderStream=Se,globalThis.TextDecoderStream=Te),typeof globalThis.WritableStream>"u"&&(globalThis.WritableStream=Ae,globalThis.ReadableStream=Pe),typeof globalThis.crypto>"u"&&(globalThis.crypto=We.webcrypto)}function At(e){var t;Tt();const a=((t=e.static)==null?void 0:t.root)??P(ee(import.meta.url),"..","..","dist");return{router:async(s,c,l)=>{try{const u=await _t(L(s),s,c,"server"),i=await bt(u,e);if(i){const p=await i.completion;if(p)throw p;if(i.requestEv.headersSent)return}l()}catch(u){console.error(u),l(u)}},notFound:async(s,c,l)=>{try{const u=L(s),i=we(u.pathname);c.writeHead(404,{"Content-Type":"text/html; charset=utf-8","X-Not-Found":u.pathname}),c.end(i)}catch(u){console.error(u),l(u)}},staticFile:async(s,c,l)=>{var u;try{const i=L(s);if(Re(s.method||"GET",i)){const p=P(a,i.pathname),f=xe(p),m=_e(i.pathname).replace(/^\./,""),b=St[m];b&&c.setHeader("Content-Type",b),(u=e.static)!=null&&u.cacheControl&&c.setHeader("Cache-Control",e.static.cacheControl),f.on("error",l),f.pipe(c);return}return l()}catch(i){console.error(i),l(i)}}}}const I="__RequestHandlers__",N="__RequestMiddleware__",X="__filter__",Z="__execption__",Pt=function(e){return(t="/")=>(a,r)=>{const n=Reflect.getMetadata(I,a)??[];n.push({path:t,mod:e,key:r}),Reflect.defineMetadata(I,n,a)}},W=Pt("get"),Dt=e=>(t,a)=>{const r=Reflect.getMetadata(N,t,a)??[];r.push(e),Reflect.defineMetadata(N,r,t,a)};class Mt{constructor(){}find(t){return`get user ${t} ok`}}var Ht=Object.defineProperty,$t=Object.getOwnPropertyDescriptor,Ot=(e,t,a,r)=>{for(var n=r>1?void 0:r?$t(t,a):t,o=e.length-1,s;o>=0;o--)(s=e[o])&&(n=(r?s(t,a,n):s(n))||n);return r&&n&&Ht(t,a,n),n};class pe{constructor(t){A(this,"find",function(t,a){console.log(this.userService);const r=t.query.uid;return this.userService.find(String(r))});this.userService=t,this.userService=new Mt}}Ot([W(),Dt(async(e,t,a)=>{console.log(e.path),a()})],pe.prototype,"find",2);var Wt=Object.defineProperty,Et=Object.getOwnPropertyDescriptor,Q=(e,t,a,r)=>{for(var n=r>1?void 0:r?Et(t,a):t,o=e.length-1,s;o>=0;o--)(s=e[o])&&(n=(r?s(t,a,n):s(n))||n);return r&&n&&Wt(t,a,n),n};class E{constructor(){A(this,"main",async function(t,a){const r=await j(P(global.__client,"/index.html"),"utf-8");a.setHeader("content-type","text/html"),a.send(r)});A(this,"icon",async function(t,a){const r=await j(P(global.__client,"./favicon.ico"),"utf-8");a.setHeader("content-type","image/x-icon"),a.send(r)});A(this,"react",async function(t,a){const r=await j(P(global.__client,"./react.svg"),"utf-8");a.setHeader("content-type","image/svg+xml"),a.send(r)})}}Q([W("/")],E.prototype,"main",2);Q([W("/favicon.ico")],E.prototype,"icon",2);Q([W("/react.svg")],E.prototype,"react",2);const kt=[{path:"/",controller:E},{path:"/api",childrens:[{path:"/user",controller:pe}]}];class R{static async push(t){const a=new Date;console.log(`${a.getHours()}:${a.getMinutes()}:${a.getSeconds()} ${t}`)}static async log(t,a,r){console.log(`${new Date().toLocaleDateString()} [${a.toLocaleUpperCase()}] ${t}`)}static async run(t){console.log(await t())}}function me(e){var a;const t=te();for(const[r,n]of Object.entries(e)){const o=n.path;n.controller&&t.use(o,jt(n.controller,n.path)),(a=n.childrens)!=null&&a.length&&t.use(o,me(n.childrens))}return t}function jt(e,t){const a=te(),r=new e,n=Reflect.getMetadata(I,r)??{};for(const[o,{path:s,key:c,mod:l}]of Object.entries(n)){const u=Reflect.getMetadata(N,r,c)??[];for(const[f,m]of Object.entries(u))a[l](s,m);R.push(`\x1B[34mCreate Route to { Use: ${t}, Mod: ${l.toLocaleUpperCase()}, Path: ${s}, handle: ${c}}\x1B[0m`);const i=Reflect.getMetadata(X,r,c)??Reflect.getMetadata(X,e),p=Reflect.getMetadata(Z,r,c)??Reflect.getMetadata(Z,e);a[l](s,async(f,m,b)=>{let g=null;try{g=await r[c](f,m,b),i&&(g=i(g,{Req:f,Res:m,Next:b}))}catch(w){g=p?p(w,{Req:f,Res:m,Next:b}):w}g&&m.send(g)})}return a}global.__filename=ee(import.meta.url);global.__dirname=T(__filename,"../");global.__client=T(__dirname,"../client");global.__ssr=T(__dirname,"../ssr");const qt=async()=>{R.push("正在初始化服务器...");const e=S();e.use(ke()),R.push("正在托管client静态资源..."),e.use("/assets",S.static(T(__dirname,"../client/assets"))),R.push("正在托管ssr静态资源..."),e.use("/build",S.static(T(__dirname,"./build"),{immutable:!0,maxAge:"1y"})),e.use(S.static(T(__dirname,"../ssr"),{redirect:!1})),R.push("正在加载ssr路由...");const{router:t,notFound:a}=At({render:Ee,qwikCityPlan:ve});e.use(t),e.use(S.json()),e.use(S.urlencoded({extended:!0})),R.push("正在加载服务器路由..."),e.use(me(kt)),e.use(a),e.listen(3e3,Lt)};function Lt(){R.push(`当前服务器位于 ${process.env.DEV_ENV?"开发环境中":"生产环境中 "}`),R.push("\x1B[4mhttp://127.0.0.1:3000\x1B[0m")}qt();
